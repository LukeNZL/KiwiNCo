{% load static %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/style.css' %}">

<nav>
    <a id="logo" href="{% url 'home' %}">
        <img id="logo-image" src="{% static 'images/logo.png' %}">
    </a>

    <div id="catagory-container">
        <a class="unselectable" class="header-catagories" href="{% url 'catagory' 'Shirts' %}">
            <div style="display: flex; justify-content: center; font-size: 32px;">Shirts</div>
        </a>
        <a class="unselectable" class="header-catagories" href="{% url 'catagory' 'Jumpers' %}">
            <div style="display: flex; justify-content: center; font-size: 32px;">Jumpers</div>
        </a>
        <a class="unselectable" class="header-catagories" href="{% url 'catagory' 'Pants' %}">
            <div style="display: flex; justify-content: center; font-size: 32px;">Pants</div>
        </a>
        <a class="unselectable" class="header-catagories" href="{% url 'catagory' 'Shoes' %}">
            <div style="display: flex; justify-content: center; font-size: 32px;">Shoes</div>
        </a>
    </div>

    <div id="search-bar-box">
        <div id="search-image-box">
            <img id="search-image" src="{% static 'images/Search.png' %}">
        </div>
        <div id="search-bar" contenteditable="True"></div>
    </div>

    <div id="account-image-box" onclick=showAccount()>
        <img id="account-image" src="{% static 'images/Account.png' %}">
    </div>

    <div id="account-container">
        {% if request.user.is_authenticated %}
        <p id="display-user">Logged in as {{request.user}}</p>
        <a href="{% url 'logout' %}" class="header-button">Logout</a>
        {% else %}
        <div id="login-signup-button">
            <a href="{% url 'login' %}"  class="header-button">LOGIN</a>
            <div class="header-divider">|</div>
            <a href="{% url 'register' %}" class="header-button">SIGN UP</a>
        </div>
        {% endif %}

        {% if page == 'login' %}
        <div>
            <form method="POST", action="">
                {% csrf_token %}
                <!--Login form-->
                <div class="login-box">
                    <input class="user-input" type="text" placeholder="Username" name="username">
                    <input class="user-input" type="password" placeholder="Password" name="password">
                    <div>
                        <input class="login-button" type="submit" value="Login" />
                    </div>

                </div>
            </form>
        </div>
        {% else %}
        <div>
            <form method="POST">
                {% csrf_token %}
                <!--Signup form that only works with no closing-->
                <div class="login-box">
                    <input class="user-input" placeholder="Username" action="{{form.username}}
                    <input class="user-input" placeholder="Password" type="password" action="{{form.password1}}
                    <input class="user-input" placeholder="Confirm Password" type="password" action="{{form.password2}}
                    <div>
                        <input class="login-button" type="submit" value="Sign Up" />
                    </div>
                </div>
            </form>
        </div>
        {% endif %}

     <!--   {% if request.user.is_authenticated %}
        <p id="display-user">Logged in as {{request.user}}</p>
        <a href="{% url 'logout' %}" class="header-button">Logout</a>
        {% else %}
        <h3>Login</h3>
        <form method="POST", action="">
            {% csrf_token %}

            <div class="login-box">
                <input class="user-input" type="text" placeholder="Username" name="username">
                <input class="user-input" type="password" placeholder="Password" name="password">
                <div>
                    <input class="login-button" type="submit" value="Login" />
                </div>

            </div>
        </form>


       <h3>Dont have an account?</h3>
        <form method="POST">
            {% csrf_token %}

            <div class="login-box">
                <input class="user-input" placeholder="Username" action="{{form.username}}">
                <input class="user-input" placeholder="Password" type="password" action="{{form.password1}}">
                <input class="user-input" placeholder="Confirm Password" type="password" action="{{form.password2}}">
                <div>
                    <input class="login-button" type="submit" value="Sign Up">
                </div>

            </div>
        </form>

        {% endif %} -->

    </div>

    <div id="cart-container">
    </div>

    <div id="cart-image-box" onclick=showCart()>
        <img id="cart-image" src="{% static 'images/Cart.png' %}">
    </div>

    <script>
        function showCart(){
            document.addEventListener('click', function handleClickOutsideBox(event) {
            const box = document.getElementById('cart-container');
            const button = document.getElementById('cart-image-box');

            if (!box.contains(event.target) && !button.contains(event.target)) {
                box.style.display = 'none';
            }

            if (button.contains(event.target)) {
                document.getElementById("cart-container").style.display = "flex";
            }
            });
        }


        function showAccount(){
            document.addEventListener('click', function handleClickOutsideBox(event) {
            const box = document.getElementById('account-container');
            const button = document.getElementById('account-image-box');

            if (!box.contains(event.target) && !button.contains(event.target)) {
                box.style.display = 'none';
            }

            if (button.contains(event.target)) {
                document.getElementById("account-container").style.display = "flex";
            }
            });
        }


    </script>
</nav>
{% endblock %}